name=dieharder
from_source=dieharder
revision=1
imagedeps="gcc"
hostdeps="gcc autoconf automake libtool pkg-config"
deps="core-libs gsl"

build() {
    rm -f ${source_dir}/config.status
    rm -f ${source_dir}/dieharder/config.status
    rm -f ${source_dir}/libdieharder/config.status
    ${source_dir}/configure    \
        --host=${OS_TRIPLET} \
        --prefix=${prefix}     \
        --sysconfdir=/etc      \
        --localstatedir=/var   \
        --with-sysroot=${sysroot_dir} \
        --disable-static
    sed -i 's|-I${prefix}/include||g' dieharder/Makefile

    make -j1
}

package() {
    make install-strip DESTDIR="${dest_dir}"
}
