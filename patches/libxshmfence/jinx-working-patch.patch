diff --git libxshmfence-clean/src/xshmfence_futex.h libxshmfence-workdir/src/xshmfence_futex.h
index 673ac0e..1ae2b30 100644
--- libxshmfence-clean/src/xshmfence_futex.h
+++ libxshmfence-workdir/src/xshmfence_futex.h
@@ -53,17 +53,13 @@ static inline int futex_wait(int32_t *addr, int32_t value) {
 #include <sys/time.h>
 #include <sys/syscall.h>
 
-static inline long sys_futex(void *addr1, int op, int val1, struct timespec *timeout, void *addr2, int val3)
-{
-	return syscall(SYS_futex, addr1, op, val1, timeout, addr2, val3);
+static inline int futex_wait(int32_t *pointer, int32_t expected) {
+    while (*pointer != expected);
+    return 0;
 }
 
-static inline int futex_wake(int32_t *addr) {
-	return sys_futex(addr, FUTEX_WAKE, MAXINT, NULL, NULL, 0);
-}
-
-static inline int futex_wait(int32_t *addr, int32_t value) {
-	return sys_futex(addr, FUTEX_WAIT, value, NULL, NULL, 0);
+static inline int futex_wake(int32_t *pointer) {
+    return 1;
 }
 
 #endif
