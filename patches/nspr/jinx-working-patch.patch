diff --git nspr-clean/nspr/pr/src/md/unix/uxrng.c nspr-workdir/nspr/pr/src/md/unix/uxrng.c
index 7c9cdb6..fb1eb1d 100644
--- nspr-clean/nspr/pr/src/md/unix/uxrng.c
+++ nspr-workdir/nspr/pr/src/md/unix/uxrng.c
@@ -27,7 +27,7 @@ static size_t GetHighResClock(void* buf, size_t maxbytes) { return 0; }
 
 #elif (defined(LINUX) || defined(FREEBSD) || defined(__FreeBSD_kernel__) || \
        defined(NETBSD) || defined(__NetBSD_kernel__) || defined(OPENBSD) || \
-       defined(__GNU__))
+       defined(__GNU__) || defined(__ironclad__))
 #  include <sys/types.h>
 #  include <sys/stat.h>
 #  include <fcntl.h>
diff --git nspr-clean/nspr/pr/src/pthreads/ptio.c nspr-workdir/nspr/pr/src/pthreads/ptio.c
index 1baba7c..c736923 100644
--- nspr-clean/nspr/pr/src/pthreads/ptio.c
+++ nspr-workdir/nspr/pr/src/pthreads/ptio.c
@@ -143,7 +143,7 @@ static ssize_t (*pt_aix_sendfile_fptr)() = NULL;
 #    endif /* HAVE_SEND_FILE */
 #  endif   /* AIX */
 
-#  ifdef LINUX
+#  if defined(LINUX) && !defined(__ironclad__)
 #    include <sys/sendfile.h>
 #  endif
 
@@ -910,6 +910,11 @@ static PRBool pt_solaris_sendfile_cont(pt_Continuation* op, PRInt16 revents) {
 
 #  ifdef LINUX
 static PRBool pt_linux_sendfile_cont(pt_Continuation* op, PRInt16 revents) {
+#ifdef __ironclad__
+  op->syserrno = ENOSYS;
+  op->result.code = -1;
+  return PR_TRUE;
+#else
   ssize_t rv;
   off_t oldoffset;
 
@@ -931,6 +936,7 @@ static PRBool pt_linux_sendfile_cont(pt_Continuation* op, PRInt16 revents) {
     return PR_FALSE;
   }
   return PR_TRUE;
+#endif
 }
 #  endif /* LINUX */
 
@@ -2470,8 +2476,13 @@ static PRInt32 pt_LinuxSendFile(PRFileDesc* sd, PRSendFileData* sfd,
   if (file_nbytes_to_send != 0) {
     offset = sfd->file_offset;
     do {
+#ifndef __ironclad__
       rv = sendfile(sd->secret->md.osfd, sfd->fd->secret->md.osfd, &offset,
                     file_nbytes_to_send);
+#else
+      count = -1;
+      goto failed;
+#endif
     } while (rv == -1 && (syserrno = errno) == EINTR);
     if (rv == -1) {
       if (syserrno != EAGAIN && syserrno != EWOULDBLOCK) {
