#! /bin/sh

name=ironclad
version=0f72c2f2d2f63fef20a8056fdf9b049c37a430a7
revision=1
git_url="https://git.savannah.nongnu.org/git/ironclad.git"
commit=${version}
source_imagedeps="git"
source_hostdeps="automake autoconf libtool pkg-config"
imagedeps="texinfo gprbuild binutils"
hostdeps="gcc autoconf automake libtool pkg-config"

prepare() {
    ./bootstrap
}

configure() {
        GPRBUILD="gprbuild --target=${OS_TRIPLET} --db /base_dir/build-support/gprconfig" \
    autotools_configure \
        --target=$ARCHITECTURE-limine-elf
}

build() {
    make all -j${parallelism}
}

package() {
    DESTDIR=${dest_dir} make install
}
